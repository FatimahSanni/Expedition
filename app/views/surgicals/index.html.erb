<br>
<%= search_form_for @search do |f| %>
<%= f.condition_fields do |c| %>
<div class="form-inline">
  <%= c.attribute_fields do |a| %>
    <%= a.attribute_select associations: [:patient] %>
  <% end %>
  <%= c.predicate_select %>
  <%= c.value_fields do |v| %>
    <%= v.text_field :value, class: "form-control" %>
    <% end %>
</div> <br>
<% end %>
<div class="form-group">
  <%= f.submit "Search", class: "btn btn-success" %>
</div>
<% end %>
<div>
  Total: <%= @surgicals.all.count %>
</div>
<hr>
<%= link_to 'Enter Surgery Details', new_surgical_path %>

<h1>Listing Surgeries</h1>

<table class="table">
  <thead>
    <tr>
      <th>Patient</th>
      <th>Surgery date</th>
      <th>Surgery</th>
      <th>Surgeon</th>
      <th>Eye</th>
      <th>Average k</th>
      <th>Axial length</th>
      <th>IOL Insertion</th>
      <th>IOL Power</th>
      <th>Complication</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @surgicals.each do |surgical| %>
      <tr>
        <td><%= surgical.patient.full_name %></td>
        <td><%= surgical.surgery_date %></td>
        <td><%= surgical.surgery.name %></td>
        <td>
          <% ! if surgical.surgeon %>
          <%= surgical.surgeon.name %>
          <% end %>
        </td>
        <td><%= surgical.eye %></td>
        <td><%= surgical.average_k %></td>
        <td><%= surgical.axial_length %></td>
        <td>
          <% ! if surgical.iol_insertion.present? %>
          <%= surgical.iol_insertion.name %>
          <% end %>
        </td>
        <td>
          <% ! if surgical.iol_insertion.present? %>
          <%= surgical.iol_power.power %></td>
          <% end %>
        <td>
          <% ! if surgical.iol_insertion.present? %>
          <%= surgical.complication.name %>
          <% end %>
        </td>
        <td><%= link_to 'Show', surgical %></td>
        <td><%= link_to 'Edit', edit_surgical_path(surgical) %></td>
        <td><%= link_to 'Destroy', surgical, method: :delete, data: { confirm: 'Are you sure?' } %></td>
      </tr>
    <% end %>
  </tbody>
</table>

<br>


